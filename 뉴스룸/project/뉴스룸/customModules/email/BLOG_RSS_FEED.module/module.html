{% set blogId = module.blog_field %}
{% set posts = blog_popular_posts(blogId, module.number_field ) %}

<div style='display: flex; flex-wrap: wrap; '>

	{% for post in posts %}

	<div style='width: 100%;'>
		<h5 style='
							 height: 44px; 
							 margin-bottom: 5px; 
							 white-space: normal;
							 display: -webkit-box;
							 -webkit-line-clamp: 2;
							 -webkit-box-orient: vertical;
							 overflow: hidden;
							 '
				>{{post.name}}</h5>
		<span>{{post.post_list_content|truncatehtml(200, '..' , false)}}</span>
		<img style='margin-bottom: 5px;background-color: rgba(0,0,0,0.1); object-fit:contain; width: {{ module.width }}{{ module.width_value }}; height: {{ module.height }}{{ module.height_value }};' src='{{post.featured_image ? post.featured_image : get_asset_url('/midasBandi/Coded_Files/images/noimg_mts.png')}}' alt='featured_image'>

		<a href="{{ post.absolute_url }}">
			{% if module.image_field.src %}
			{% set sizeAttrs = 'width="{{ module.image_field.width }}" height="{{ module.image_field.height }}"' %}
			{% if module.image_field.size_type == 'auto' %}
			{% set sizeAttrs = 'style="max-width: 100%; height: auto;"' %}
			{% elif module.image_field.size_type == 'auto_custom_max' %}
			{% set sizeAttrs = 'width="{{ module.image_field.max_width }}" height="{{ module.image_field.max_height }}" style="max-width: 100%; height: auto;"' %}
			{% endif %}
			{% set loadingAttr = module.image_field.loading != 'disabled' ? 'loading="{{ module.image_field.loading }}"' : '' %}
			<img src="{{ module.image_field.src }}" alt="{{ module.image_field.alt }}" {{ loadingAttr }} {{ sizeAttrs }}>
			{% endif %}
		</a>
	</div>

	{% endfor %}	
</div>
