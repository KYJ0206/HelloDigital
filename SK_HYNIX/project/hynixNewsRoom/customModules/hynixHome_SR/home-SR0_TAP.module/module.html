<section class="sr0Tap">
	<section class="search-full media-list-search">
		<div class="inner">
			<div class="inner2">
				<div class="flexWrap" style="display: block">
					<div class="input-searchWrap">
						<input id="search" type="text" placeholder="검색어를 입력해주세요">
						<a class="input-search"></a>
					</div>
				</div>

				<div class="tagWrap2">
					<a href="/search-results?searchType=all&amp;searchText=SK%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4&amp;dateType=all&amp;startDate=&amp;endDate=&amp;category=&amp;hsLang=ko-kr">#SK하이닉스</a>
					<a href="/search-results?searchType=all&amp;searchText=DRAM&amp;dateType=all&amp;startDate=&amp;endDate=&amp;category=&amp;hsLang=ko-kr">#DRAM</a>
					<a href="/search-results?searchType=all&amp;searchText=NAND&amp;dateType=all&amp;startDate=&amp;endDate=&amp;category=&amp;hsLang=ko-kr">#NAND</a>
					<a href="/search-results?searchType=all&amp;searchText=%EC%B2%AD%EC%A3%BC%EC%BA%A0%ED%8D%BC%EC%8A%A4&amp;dateType=all&amp;startDate=&amp;endDate=&amp;category=&amp;hsLang=ko-kr">#청주캠퍼스</a>
					<a href="/search-results?searchType=all&amp;searchText=%EA%B3%B5%EC%A0%95&amp;dateType=all&amp;startDate=&amp;endDate=&amp;category=&amp;hsLang=ko-kr">#공정</a>
				</div>
			</div>
		</div>
	</section>
	<section class="blog-menu media-category">
		<div class="list-conWrap-top">
			<div class="inner mobile-sch">
				<div class="inner2">
					<div class="categoryWrap">
<!-- 						<div class="selectWrap d-mobile">
							<select name="category-selectbox" id="category-select">
								<option value="all">전체 카테고리</option>
								<option value="blog-기술">기술</option>
								<option value="blog-사람-문화">사람&amp;문화</option>
								<option value="blog-지속가능경영">지속가능경영</option>
								<option value="보도자료">보도자료</option>
								<option value="media">미디어라이브러리</option>
							</select>
							<i></i>
						</div> -->
						<ol class="category d-pc">
							<li style="cursor: pointer" class="categoryItem categoryAll"><a class="accordion-total-a">전체</a></li>
							<li style="cursor: pointer" class="categoryItem categoryTech"><a class="accordion-tech-a">기술</a></li>
							<li style="cursor: pointer" class="categoryItem categoryCulture"><a class="accordion-culture-a">사람&amp;문화</a></li>
							<li style="cursor: pointer" class="categoryItem categoryS"><a class="accordion-sustainability-a">지속가능경영</a></li>
							<li style="cursor: pointer" class="categoryItem categoryPress"><a class="accordion-press-a">보도자료</a></li>
							<li style="cursor: pointer" class="categoryItem categoryMedia"><a class="accordion-media-a">미디어라이브러리</a></li>
						</ol>
					</div>
					<!-- 					<div class="ckWrap"> -->
					<!-- 						<label for="ck-recent"><input id="ck-recent" name="check" type="radio" value="사진" ><i></i>사진</label>
<label for="ck-popularity"><input id="ck-popularity" name="check" type="radio" value="영상"><i></i>영상</label> -->
					<div class="inner2">
						<div class="flexWrap-cal">
							<div class="calWrap" style="display: none;">
								<div class="datepickerWrap datepickerStartDate">
									<label for="date-from">
										<!-- 											<input class="datepicker" id="date1" value>
<input class="datepicker" id="date2" value> -->
										<input class="datepicker" autocomplete="off" id="date-from" value="" placeholder="2021-10-13">
										<span class="cal-icon">
											<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
												<g fill="#1E1E1E" fill-rule="evenodd">
													<path d="M3.299 19.185H19.59V11.94H3.299v7.245zM3.3 10.14h16.291V6.915H3.3v3.225zm13.063-5.025V3h-1.798v2.115h-6.24V3H6.527v2.115H1.5v15.87h19.89V5.115h-5.027z"></path>
													<path d="M6 15h1.5v1.5H6zM9 15h1.5v1.5H9zM12 15h1.5v1.5H12zM15 15h1.5v1.5H15z"></path>
												</g>
											</svg>
										</span>
									</label>
								</div>
								<span class="cal-span">~</span>
								<div class="datepickerWrap datepickerEndDate">
									<label for="date-to">
										<input class="datepicker" autocomplete="off" id="date-to" value="">
										<span class="cal-icon">
											<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
												<g fill="#1E1E1E" fill-rule="evenodd">
													<path d="M3.299 19.185H19.59V11.94H3.299v7.245zM3.3 10.14h16.291V6.915H3.3v3.225zm13.063-5.025V3h-1.798v2.115h-6.24V3H6.527v2.115H1.5v15.87h19.89V5.115h-5.027z"></path>
													<path d="M6 15h1.5v1.5H6zM9 15h1.5v1.5H9zM12 15h1.5v1.5H12zM15 15h1.5v1.5H15z"></path>
												</g>
											</svg>
										</span>
									</label>
								</div>
							</div>

							<select class="skh-select" name="selectbox" id="selectbox" ;="">
								<!-- 									<option class="selectopt recentOpt" value="recent">최신순</option> -->
								<option class="selectopt accuracyOpt" value="all">날짜 선택</option>
								<option class="selectopt weekOpt" value="week">1주일전</option>
								<option class="selectopt monthOpt" value="month">1개월전</option>
								<option class="selectopt yearOpt" value="year">1년전</option>
								<option class="selectopt selectOpt" value="select">날짜&nbsp;직접&nbsp;선택</option>
							</select>
						</div>
					</div>
					<!-- 					</div> -->
				</div>
			</div>
		</div>
	</section>
	
	<!-- ====================================== 모바일 ============================================ -->
	
  <div class="Recangle" style="display:none;">
    <a class="rec-ch">검색 필터 적용:</a>
    <ul>
      <li class="Rectangle-Copy-92">
        <select class="skh-select" name="selectbox" id="category-select">
						<option value="all">전체 카테고리</option>
						<option value="blog-기술">기술</option>
						<option value="blog-사람-문화">사람&amp;문화</option>
						<option value="blog-지속가능경영">지속가능경영</option>
						<option value="보도자료">보도자료</option>
						<option value="media">미디어라이브러리</option>
				</select>
      </li>
      <li class="Rectangle-Copy-93">
        <div class="m-datepickerBox">
				<div class="flexWrap-cal">
					<div class="calWrap">
						<div class="datepickerWrap datepickerStartDate">
							<label for="date-from2">
								<input class="datepicker"  autocomplete="off" id="date-from2" value>
								<span class="cal-icon">
									<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
										<g fill="#1E1E1E" fill-rule="evenodd">
											<path d="M3.299 19.185H19.59V11.94H3.299v7.245zM3.3 10.14h16.291V6.915H3.3v3.225zm13.063-5.025V3h-1.798v2.115h-6.24V3H6.527v2.115H1.5v15.87h19.89V5.115h-5.027z"/>
											<path d="M6 15h1.5v1.5H6zM9 15h1.5v1.5H9zM12 15h1.5v1.5H12zM15 15h1.5v1.5H15z"/>
										</g>
									</svg>
								</span>
							</label>
						</div>
						<span class="cal-span">~</span>
						<div class="datepickerWrap datepickerEndDate">
							<label for="date-to2">
								<input class="datepicker" autocomplete="off" id="date-to2" value>
								<span class="cal-icon">
									<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
										<g fill="#1E1E1E" fill-rule="evenodd">
											<path d="M3.299 19.185H19.59V11.94H3.299v7.245zM3.3 10.14h16.291V6.915H3.3v3.225zm13.063-5.025V3h-1.798v2.115h-6.24V3H6.527v2.115H1.5v15.87h19.89V5.115h-5.027z"/>
											<path d="M6 15h1.5v1.5H6zM9 15h1.5v1.5H9zM12 15h1.5v1.5H12zM15 15h1.5v1.5H15z"/>
										</g>
									</svg>
								</span>
							</label>
						</div>
					</div>
					
					<select class="skh-select" name="selectbox" id="selectbox";>
						<option class="selectopt allOpt" value="all">전체 날짜</option>
						<option class="selectopt weekOpt" value="week">1주일전</option>
						<option class="selectopt monthOpt" value="month">1개월전</option>
						<option class="selectopt yearOpt" value="year">1년전</option>
						<option class="selectopt selectOpt" value="select">직접선택</option>
					</select>
				</div>
			</div>
      </li>
    </ul>
  </div>
</section>

<script type='text/babel'>
const searchQuery = (key) => {
	return new URLSearchParams(location.search).get(key);
};

console.log('qweqwe')
const searchType = searchQuery('searchType')
const searchText = searchQuery('searchText')
const dateType = searchQuery('dateType')
const startDate = searchQuery('startDate')
const endDate = searchQuery('endDate')
const category = searchQuery('category')

$('.input-searchWrap #search').on('keypress',(key) => {
	if(key.keyCode === 13) {
		const text = $('.input-searchWrap #search').val();
		location.href = `/search-results?searchType=${searchType}&searchText=${text}&dateType=${searchType}&startDate=${startDate}&endDate=${endDate}&category=${category}`
	}
})

$('.input-searchWrap .input-search').click(() => {
	const text = $('.input-searchWrap #search').val();
	location.href = `/search-results?searchType=${searchType}&searchText=${text}&dateType=${searchType}&startDate=${startDate}&endDate=${endDate}&category=${category}`
})

const settingDate = () => {
	const TODAY = moment().format('YYYY-MM-DD')
  const WEEK = moment().subtract(7, 'days').format('YYYY-MM-DD')
	$('#date-from').val('')
	$('#date-to').val('')

	if(startDate && endDate) {
		// =================================== PC =================================== //
		$("#date-from").datepicker();
		$("#date-from" ).datepicker("option", "dateFormat", "yy-mm-dd" );
		$('#date-from').datepicker("option", "maxDate", $("#date-to").val());
		$("#date-from").datepicker('setDate', startDate);
		$('#date-from').datepicker("option", "onClose", function ( selectedDate ) {
					const end = $('#date-to').val()

					location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${selectedDate}&endDate=${end}&category=${category}`

				});

		$("#date-to").datepicker();
		$("#date-to" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
		$('#date-to').datepicker("option", "minDate", $("#date-from").val());
		$('#date-to').datepicker("option", "maxDate", TODAY);
		$("#date-to").datepicker('setDate', endDate);
		$('#date-to').datepicker("option", "onClose", function ( selectedDate ) {
			const start_date = $('#date-from').datepicker('getDate');
			const start = moment(start_date).format('YYYY-MM-DD')

			if(!start_date) {
				alert('시작일을 선택해주세요..')
				$('#date-to').val('')
			} else if(start > selectedDate) {
				alert('시작일보다 이전날짜는 선택 할 수 없습니다.')
				$('#date-to').val('')
			} else {
				location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${start}&endDate=${selectedDate}&category=${category}`
			}
		});
		// =================================== PC =================================== //

		// =================================== MOBILE =================================== // 
		$("#date-from2").datepicker();
		$("#date-from2" ).datepicker("option", "dateFormat", "yy-mm-dd" );
		$('#date-from2').datepicker("option", "maxDate", $("#date-to2").val());
		$("#date-from2").datepicker('setDate', startDate);
		$('#date-from2').datepicker("option", "onClose", function ( selectedDate ) {
			const end = $('#date-to2').val()
			location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${selectedDate}&endDate=${end}&category=${category}`
		});
		$('#date-from2').datepicker("option", "onClose", function ( selectedDate ) {
					const end = $('#date-to2').val()

					location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${selectedDate}&endDate=${end}&category=${category}`

				});

		$("#date-to2").datepicker();
		$("#date-to2" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
		$('#date-to2').datepicker("option", "minDate", $("#date-from2").val());
		$('#date-to2').datepicker("option", "maxDate", TODAY);
		$("#date-to2").datepicker('setDate', endDate);
		$('#date-to2').datepicker("option", "onClose", function ( selectedDate ) {
			const start_date = $('#date-from2').datepicker('getDate');
			const start = moment(start_date).format('YYYY-MM-DD')

			if(!start_date) {
				alert('시작일을 선택해주세요..')
				$('#date-to2').val('')
			} else if(start > selectedDate) {
				alert('시작일보다 이전날짜는 선택 할 수 없습니다.')
				$('#date-to2').val('')
			} else {
				location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${start}&endDate=${selectedDate}&category=${category}`
			}
		});
		// =================================== MOBILE =================================== //
	} else {
		console.log('asdfasdfasdfasdfasdfasdfasdf')
		// =================================== PC =================================== //
		$("#date-from").datepicker();
		$("#date-from" ).datepicker("option", "dateFormat", "yy-mm-dd" );
		$('#date-from').datepicker("option", "maxDate", TODAY);
		$('#date-from').datepicker("option", "onClose", function ( selectedDate ) {
			console.log('!@#!@#!@#!@#!@#!@#!@#!@#!@#')
			const end = $('#date-to').val()
			console.log(selectedDate,'selectedDate')
			console.log(end, 'END END')
			location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${selectedDate}&endDate=${end}&category=${category}`
		});

		$("#date-to").datepicker();
		$("#date-to" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
		$('#date-to').datepicker("option", "minDate", $("#date-from").val());
		$('#date-to').datepicker("option", "maxDate", TODAY);
		$('#date-to').datepicker("option", "onClose", function ( selectedDate ) {
			const start_date = $('#date-from').datepicker('getDate');
			const start = moment(start_date).format('YYYY-MM-DD')

			if(!start_date) {
				alert('시작일을 선택해주세요..')
				$('#date-to').val('')
			} else if(start > selectedDate) {
				alert('시작일보다 이전날짜는 선택 할 수 없습니다.')
				$('#date-to').val('')
			} else {
				location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${start}&endDate=${selectedDate}&category=${category}`
			}
		});
		// =================================== PC =================================== //

		// =================================== MOBILE =================================== // 
		$("#date-from2").datepicker();
		$("#date-from2" ).datepicker("option", "dateFormat", "yy-mm-dd" );
		$('#date-from2').datepicker("option", "maxDate", TODAY);
		$('#date-from2').datepicker("option", "onClose", function ( selectedDate ) {
			const end = $('#date-to2').val()
			location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${selectedDate}&endDate=${end}&category=${category}`
		});

		$("#date-to2").datepicker();
		$("#date-to2" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
		$('#date-to2').datepicker("option", "minDate", $("#date-from2").val());
		$('#date-to2').datepicker("option", "maxDate", TODAY);
		$('#date-to2').datepicker("option", "onClose", function ( selectedDate ) {
			const start_date = $('#date-from2').datepicker('getDate');
			const start = moment(start_date).format('YYYY-MM-DD')

			if(!start_date) {
				alert('시작일을 선택해주세요..')
				$('#date-to2').val('')
			} else if(start > selectedDate) {
				alert('시작일보다 이전날짜는 선택 할 수 없습니다.')
				$('#date-to2').val('')
			} else {
				location.href = `/search-results?searchType=${searchType}&searchText=${searchText}&dateType=select&startDate=${start}&endDate=${selectedDate}&category=${category}`
			}
		});
		// =================================== MOBILE =================================== //
	}
	
	
}
settingDate()
$.datepicker.setDefaults({
	dateFormat: 'yy-mm-dd',
	prevText: '이전 달',
	nextText: '다음 달',
	monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
	monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
	dayNames: ['일', '월', '화', '수', '목', '금', '토'],
	dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
	dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
	showMonthAfterYear: true,
	yearSuffix: '년',
	firstDay: 0,
	changeYear : true, 
	changeMonth : true,
})
</script>